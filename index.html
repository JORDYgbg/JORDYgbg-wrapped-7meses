<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JORDY & Tú • Checkpoint 7 Meses 2025</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
</head>
<body>

  <div id="particles-js"></div>

  <!-- Flechas navegación -->
  <div class="nav">
    <button class="nav-btn" id="prev">←</button>
    <button class="nav-btn" id="next">→</button>
  </div>

  <!-- Portada -->
  <section id="cover" class="page active">
    <div class="card">
      <h1 class="title">CHECKPOINT 2025</h1>
      <h2 class="subtitle">7 meses juntos</h2>
      <p class="big-text" id="dias-juntos">cargando…</p>
      <p class="big-text">Novios virtuales que se quieren en 8K ❤️</p>
      <button class="start-btn" onclick="nextPage()">Empezar</button>
    </div>
  </section>

  <!-- Meses dinámicos -->
  <div id="meses-container"></div>

  <!-- Juegos -->
  <section id="juegos" class="page">
    <div class="card">
      <h1 class="title">Top 5 juegos donde fuimos leyenda</h1>
      <div id="juegos-grid"></div>
    </div>
  </section>

  <!-- Final -->
  <section id="final" class="page">
    <div class="card">
      <h1 class="title">Canción que más me sonó a ti</h1>
      <p class="song" id="cancion-principal"></p>
      <h1 class="title mt-5">Momentos que nunca olvidaremos</h1>
      <div id="momentos-grid"></div>
    </div>
  </section>

  <script>
    let current = 0;
    const pages = [];

    function nextPage() {
      if (current >= pages.length - 1) return;
      pages[current].classList.remove('active');
      current++;
      pages[current].classList.add('active');
      updateNav();
    }
    function prevPage() {
      if (current <= 0) return;
      pages[current].classList.remove('active');
      current--;
      pages[current].classList.add('active');
      updateNav();
    }
    function updateNav() {
      document.getElementById('prev').disabled = current === 0;
      document.getElementById('next').disabled = current === pages.length - 1;
    }

    document.getElementById('next').onclick = nextPage;
    document.getElementById('prev').onclick = prevPage;

    fetch('datos.json')
      .then(r => r.json())
      .then(data => {
        const inicio = new Date(data.fecha_inicio);
        const hoy = new Date();
        const dias = Math.floor((hoy - inicio) / 86400000);
        document.getElementById('dias-juntos').innerText = `${dias} días juntos y contando… ❤️`;

        document.getElementById('cancion-principal').innerText = data.cancion_principal;

        // Portada
        pages.push(document.getElementById('cover'));

        // Cada mes = una página completa
        const container = document.getElementById('meses-container');
        data.meses.forEach((mes, i) => {
          const page = document.createElement('section');
          page.className = 'page';
          page.innerHTML = `
            <div class="card">
              <h1 class="title">Mes ${mes.mes}</h1>
              <h2 class="subtitle">${mes.titulo}</h2>
              <div class="text-block">
                <h3>Canción dedicada:</h3>
                <p class="song-name">${mes.cancion_dedicada}</p>
                ${mes.momentos.map(m => `<p class="moment">• ${m}</p>`).join('')}
              </div>
            </div>
          `;
          container.appendChild(page);
          pages.push(page);
        });

        // Juegos
        const juegosGrid = document.getElementById('juegos-grid');
        data.juegos_top.forEach(j => {
          juegosGrid.innerHTML += `
            <div class="game-card">
              <img src="${j.portada}" alt="${j.nombre}">
              <h3>${j.nombre}</h3>
              <p>${j.stats}</p>
            </div>
          `;
        });
        pages.push(document.getElementById('juegos'));

        // Final
        const momentosGrid = document.getElementById('momentos-grid');
        data.top_momentos.forEach((m, i) => {
          momentosGrid.innerHTML += `<p class="moment big">#${i+1} ${m}</p>`;
        });
        pages.push(document.getElementById('final'));

        updateNav();
      });

    // Partículas estilo Discord Checkpoint (cuadraditos pixel)
    particlesJS('particles-js', {
      particles: {
        number: { value: 60 },
        color: { value: ['#9580ff', '#8be9fd', '#ff79c6'] },
        shape: { type: 'square' },
        opacity: { value: 0.6, random: true },
        size: { value: 5, random: true },
        move: { enable: true, speed: 1.5, direction: 'none', random: true }
      },
      interactivity: { events: { onhover: { enable: true, mode: 'repulse' } } },
      retina_detect: true
    });
  </script>
</body>
</html>
