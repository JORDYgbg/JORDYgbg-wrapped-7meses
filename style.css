/* ... (Variables y resets anteriores) ... */

/* REPARACIÓN CRÍTICA DE SLIDES */
.slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    pointer-events: none;
    visibility: hidden; /* CRÍTICO: Oculta la diapositiva por completo */
    display: flex;
    justify-content: center;
    align-items: center;
    
    transition: opacity var(--transition-duration) ease-in-out, 
                transform var(--transition-duration) cubic-bezier(0.25, 0.46, 0.45, 0.94); 
    transform: translateX(100%) scale(0.9); 
}

.slide.active-slide {
    opacity: 1;
    pointer-events: all;
    visibility: visible; /* CRÍTICO: Muestra solo la diapositiva activa */
    transform: translateX(0) scale(1); 
}

/* Las clases leaving/entering ya no necesitan cambiar la visibilidad, solo la transformación. */
.slide.leaving-prev {
    opacity: 0;
    transform: translateX(-100%) scale(0.9); 
}

.slide.leaving-next {
    opacity: 0;
    transform: translateX(100%) scale(0.9);
}

.slide.entering-prev {
    /* Esta clase se usa como punto de partida para la transición */
    transform: translateX(-100%) scale(0.9);
    visibility: visible; /* Aseguramos que sea visible antes de animar */
}

/* REPRODUCTOR DE MÚSICA FIJO (SUPERIOR DERECHA) - ESTILIZACIÓN MEJORADA */
.music-controller {
    position: fixed;
    top: 30px;
    right: 30px;
    z-index: 1000;
    background: rgba(30, 30, 45, 0.9); /* Fondo más oscuro para contraste */
    padding: 10px 15px;
    border-radius: 10px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    border: 1px solid var(--color-primary);
}

#audio-title {
    font-size: 0.9rem;
    color: var(--color-primary);
    margin-right: 15px;
    text-transform: uppercase;
    letter-spacing: 1px;
}

#wrapped-audio-player {
    /* Estilización del reproductor nativo */
    width: 200px;
    height: 30px; /* Tamaño profesional */
    /* El filtro para darle el tono lila */
    filter: hue-rotate(240deg) saturate(150%) brightness(1.2); 
    opacity: 0.8;
}

/* FLECHAS DE NAVEGACIÓN - TOP LEFT (Las dejamos como están, ya que están en la posición correcta) */
.nav-controls-top {
    position: fixed; 
    top: 30px;
    left: 30px;
    z-index: 1000;
    display: flex;
    gap: 15px;
}
/* ... (Resto del CSS anterior) ... */
